<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Comitari â€” Donde las grietas se vuelven arte</title>
  <link rel="stylesheet" href="estilos.css">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>

  <header>
    <img src="logo-comitari.png" alt="Logo Comitari" class="logo">
    <h1>Comitari</h1>
    <p class="subtitulo">Donde las grietas se vuelven caminos</p>
  </header>

  <section id="intro" class="visible">
    <h2>Â¿QuÃ© es Comitari?</h2>
    <p>Una plataforma emocional inspirada en el arte del Kintsugi. AquÃ­, lo roto se transforma en belleza.</p>
  </section>

  <section id="manifiesto" class="visible">
    <h2>Manifiesto Comitari</h2>
    <p>
      En Comitari creemos que lo roto no es el final, sino el comienzo de algo mÃ¡s bello.
      Cada grieta es una historia, cada cicatriz una seÃ±al de que hemos vivido.
      Esta plataforma es un ritual digital, un espacio para reconectar, sanar y transformar.
      AquÃ­, la tecnologÃ­a se convierte en oro emocional.
    </p>
  </section>

  <section id="testimonios" class="visible">
    <h2>Voces doradas</h2>
    <blockquote>
      â€œPensÃ© que estaba roto. Comitari me mostrÃ³ que era arte en proceso.â€
    </blockquote>
    <blockquote>
      â€œAquÃ­ encontrÃ© palabras que no juzgan, solo abrazan.â€
    </blockquote>
  </section>

  <section id="funciones" class="visible">
    <h2>Rituales Digitales</h2>
    <ul>
      <li>Mensajes simbÃ³licos</li>
      <li>Espacios de escucha</li>
      <li>Rituales compartidos</li>
    </ul>
  </section>

  <section id="filosofia" class="visible">
    <h2>FilosofÃ­a</h2>
    <blockquote>â€œNo estÃ¡s roto. EstÃ¡s en proceso de ser arte.â€</blockquote>
  </section>

  <section id="rituales" class="visible">
    <h2>Activa tu ritual</h2>
    <div class="rituales-grid">
      <div class="ritual-card">
        <h3>ğŸŒ¿ Ritual de ReconexiÃ³n</h3>
        <p>Escribe una palabra que te devuelva al presente.</p>
        <input type="text" id="palabraDorada" placeholder="Tu palabra dorada">
        <button onclick="activarReconexion()">Activar</button>
      </div>
      <div class="ritual-card">
        <h3>ğŸ”¥ Ritual de TransformaciÃ³n</h3>
        <p>Elige una emociÃ³n que quieras transmutar.</p>
        <select id="emocion">
          <option>Tristeza</option>
          <option>Miedo</option>
          <option>Rabia</option>
          <option>Duda</option>
        </select>
        <button onclick="transmutarEmocion()">Transmutar</button>
      </div>
    </div>
  </section>

  <section id="testimonios-rituales" class="visible">
    <h2>Testimonios rituales</h2>
    <p>Comparte tu palabra dorada o una frase que haya surgido en tu ritual.</p>
    <textarea id="testimonioInput" placeholder="Escribe tu testimonio simbÃ³lico aquÃ­..."></textarea>
    <button onclick="guardarTestimonio()">Compartir</button>

    <div id="testimoniosGuardados">
      <h3>ğŸŒŸ Palabras compartidas:</h3>
      <ul id="listaTestimonios"></ul>
      <div id="compartirTestimonio">
        <p>Â¿Quieres compartir tu testimonio?</p>
        <button onclick="compartirUltimoTestimonio()">Compartir en redes</button>
      </div>
    </div>
  </section>

  <footer>
    <p>Â© 2025 Comitari. Creado con amor y oro digital.</p>
  </footer>

  <audio id="ritualSonido" src="ritual-sonido.mp3" preload="auto"></audio>
  <div id="particulas"></div>

  <script>
    function reproducirSonido() {
      const sonido = document.getElementById("ritualSonido");
      if (sonido) sonido.play();
    }

    function mostrarParticulas() {
      const contenedor = document.getElementById("particulas");
      contenedor.classList.add("activo");
      setTimeout(() => {
        contenedor.classList.remove("activo");
      }, 1200);
    }

    function activarReconexion() {
      const palabra = document.getElementById("palabraDorada").value.trim();
      if (palabra) {
        localStorage.setItem("palabraDorada", palabra);
        alert(`Tu palabra dorada "${palabra}" ha sido sellada en tu ritual de reconexiÃ³n âœ¨`);
        document.getElementById("palabraDorada").value = "";
        reproducirSonido();
        mostrarParticulas();
      } else {
        alert("Escribe una palabra que te reconecte contigo.");
      }
    }

    function transmutarEmocion() {
      const emocion = document.getElementById("emocion").value;
      document.body.classList.add("transmutando");
      reproducirSonido();
      mostrarParticulas();
      setTimeout(() => {
        alert(`Has transmutado la emociÃ³n "${emocion}" en sabidurÃ­a dorada ğŸ”¥`);
        document.body.classList.remove("transmutando");
      }, 1000);
    }

    function guardarTestimonio() {
      const input = document.getElementById("testimonioInput");
      const texto = input.value.trim();
      if (texto) {
        let testimonios = JSON.parse(localStorage.getItem("testimoniosRituales") || "[]");
        testimonios.unshift(texto);
        localStorage.setItem("testimoniosRituales", JSON.stringify(testimonios));
        input.value = "";
        mostrarTestimonios();
        reproducirSonido();
        mostrarParticulas();
        alert("Tu testimonio ha sido compartido con luz dorada âœ¨");
      } else {
        alert("Escribe algo antes de compartir tu testimonio.");
      }
    }

    function mostrarTestimonios() {
      const lista = document.getElementById("listaTestimonios");
      lista.innerHTML = "";
      const testimonios = JSON.parse(localStorage.getItem("testimoniosRituales") || "[]");
      testimonios.slice(0, 10).forEach((t) => {
        const li = document.createElement("li");
        li.textContent = t;
        lista.appendChild(li);
      });
    }

    function compartirUltimoTestimonio() {
      const testimonios = JSON.parse(localStorage.getItem("testimoniosRituales") || "[]");
      if (testimonios.length === 0) {
        alert("No hay testimonios para compartir aÃºn.");
        return;
      }
      const texto = encodeURIComponent(`ğŸŒŸ Mi testimonio ritual en Comitari:\n"${testimonios[0]}"\nâœ¨ Descubre mÃ¡s en https://sebas-fox.github.io/Comitari-Web/`);
      const url = `https://twitter.com/intent/tweet?text=${texto}`;
      window.open(url, "_blank");
    }

    document.addEventListener("DOMContentLoaded", () => {
      const palabraGuardada = localStorage.getItem("palabraDorada");
      if (palabraGuardada) {
        console.log(`Palabra dorada recordada: ${palabraGuardada}`);
      }
      mostrarTestimonios();
    });
  </script>
function generarImagenTestimonio() {
  const testimonios = JSON.parse(localStorage.getItem("testimoniosRituales") || "[]");
  if (testimonios.length === 0) {
    alert("No hay testimonios para convertir en imagen.");
    return;
  }

  const texto = testimonios[0];
  const canvas = document.getElementById("canvasTestimonio");
  const ctx = canvas.getContext("2d");

  canvas.width = 1080;
  canvas.height = 1080;

  // Fondo dorado oscuro
  ctx.fillStyle = "#0f0f0f";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Textura dorada (simulada con puntos)
  for (let i = 0; i < 500; i++) {
    ctx.fillStyle = `rgba(212,175,55,${Math.random() * 0.2})`;
    ctx.beginPath();
    ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, Math.random() * 2, 0, 2 * Math.PI);
    ctx.fill();
  }

  // Texto poÃ©tico
  ctx.fillStyle = "#f7d774";
  ctx.font = "italic 32px Georgia";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  const lines = dividirTextoEnLineas(ctx, texto, 800);
  lines.forEach((line, i) => {
    ctx.fillText(line, canvas.width / 2, 400 + i * 40);
  });

  // Firma
  ctx.font = "20px Georgia";
  ctx.fillStyle = "#b08d57";
  ctx.fillText("comitari.org", canvas.width / 2, 1000);

  // Mostrar enlace de descarga
  const enlace = document.getElementById("descargarImagen");
  enlace.href = canvas.toDataURL("image/png");
  enlace.style.display = "inline-block";
  enlace.textContent = "Descargar imagen poÃ©tica";
}

function dividirTextoEnLineas(ctx, texto, maxWidth) {
  const palabras = texto.split(" ");
  const lineas = [];
  let linea = "";

  for (let palabra of palabras) {
    const prueba = linea + palabra + " ";
    const ancho = ctx.measureText(prueba).width;
    if (ancho > maxWidth) {
      lineas.push(linea.trim());
      linea = palabra + " ";
    } else {
      linea = prueba;
    }
  }
  if (linea) lineas.push(linea.trim());
  return lineas;
}

</body>
</html>

